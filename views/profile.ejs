<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= name  %></title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</head>
<style>
  body{
    position: relative;
  }
  .name{
    text-align: center  ;
    margin: 10px;
  }
  .tags p{
    background-color: lightblue;
    border-radius: 10px;
    display: inline-block;
    padding: 5px 15px;
    margin: 5px;
  }

    .user-blogs .row{
        place-items: center;
        /* gap: 10px; */
        display: flex;
        justify-content: flex-start;
        
    }
    .card{
        margin-bottom: 20px;
        scale: 0.9;
        transition-duration: 0.3s;
    }
    
    .overflow-paragraph {
       
        text-overflow: ellipsis;
        overflow-y: scroll;
        padding-right: 2px;
        text-align:left;
        max-height: 100px; /* Change the max-width as needed */
        opacity: 0.8; /* Adjust opacity as needed */
    }


    .profile-img{
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .overflow-paragraph::-webkit-scrollbar {
        width: 3px;
    }

    .overflow-paragraph::-webkit-scrollbar-track {
        background: #f1f1f1;
    }

    .overflow-paragraph::-webkit-scrollbar-thumb {
        background: teal;
        border-radius: 6px;
    }

    .overflow-paragraph::-webkit-scrollbar-thumb:hover {
        background: #555;
    }
    .card:hover{
        transform: translateY(-25px);
        scale: 0.915;
    }
    .write{
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 10px;
    }
  
    .profile-about{
      display: grid;
    }
    .profile-about .btn{
      justify-self: center;
    }
    .update-form{
      width: 100%;
      
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%,-50%);
      background: transparent;
      justify-content: center;
      display: flex;
      
    }
    form{
      width: 80%;
      background-color: white;
      padding: 30px;
      border-radius: 20px;
      /* box-shadow: 5px 5px 5px rgba(255,255,255,0.6); */
      border: 1px rgba(0, 0, 0, 0.6) solid ;
    }
    
</style>
<body>
  <div class="container">
      <header class="d-flex flex-wrap align-items-center justify-content-center justify-content-md-between py-3 mb-4 border-bottom">
        <div class="col-md-3 mb-2 mb-md-0">
          <a href="/" class="d-inline-flex link-body-emphasis text-decoration-none">
            BLOGS
          </a>
        </div>
        
        

        <div class="col-md-3 text-end">
          <!-- <button type="button" class="btn btn-outline-primary me-2">Login</button> -->
          
          <button type="button" class="btn btn-primary"><a class="dropdown-item" href="/logout">Sign out</a></button>
        </div>
      </header>
  </div>
  <div class="container profile">
    <div class="row">
      <div class="profile-img col-md-6 ">
        <img width=70% src=<%="data:"+ ext  %>;base64,<%= image %> />
      </div>
      <div class="profile-about col-md-6">
        <h1 class="name">UDHAY</h1>
        <br>
        <p>blogs : <%= blog_count %></p>
        <h3>About</h3>
        <p><%=  (locals.about) ? about : "Update your profile"  %></p>
        <div class="tags">
          <p>Web development</p>
          <p>Web design</p>
          <p>Computer Science</p>
        </div>
        <br>
        <% if (user.email == email){  %>
        <button class="btn btn-outline-dark " id="show">Update Profile</button>
        <% }   %>
      </div>
      
    </div>
  </div>
  <br>
  
  <div class="container user-blogs">
    <h1>BLOGS</h1>
    <div class="row">
        <% for (var it of blogs) {%>
          <% console.log(it); %>
        <div class="card col-sm-6 col-md-4 col-lg-3" >
            <img src="https://media.istockphoto.com/id/876014518/photo/blog-blogging-concept.jpg?s=2048x2048&w=is&k=20&c=IHNJEXMPHM8QlvEYWftvGCCNAl4hLpnTz1CAoAAYM8o=" class="card-img-top" alt="...">
            <div class="card-body">

              <a href="/blogs/<%= it.id  %>"><h5 class="card-title"><%= it.title %></h5></a>
              <p class="card-text overflow-paragraph"><%= it.description %></p>
              <a href="/blogs/<%= it.id  %>" class="btn btn-primary">READ</a>

            </div>
        </div>
        <% } %>
        
    </div>
</div>

<div class="update-form" style="display: none;">
  <form method="post" enctype="multipart/form-data">
    <h3>Update</h3>
    
    <div class="mb-3">
      <label for="exampleInputEmail1" class="form-label">About</label>
      <textarea type="text" class="form-control" id="about" name="about" aria-describedby="emailHelp"><%= (locals.about) ? about : ""  %></textarea>
      <!-- <div id="emailHelp" class="form-text">We'll never share your email with anyone else.</div> -->
    </div>

    <div class="mb-3">
      <label for="exampleInputPassword1" class="form-label">Profile image</label>
      <input type="file" class="form-control" id="profile" name="image">
    </div>
    
    <button type="submit" id="show" class="btn btn-primary">Submit</button>
    <button class="btn btn-outline-danger" type="button" id="cancel">cancel</button>
  </form>
</div>
  <script>
    $("#cancel").click(
      ()=>{
        $(".update-form").slideToggle();
      }
    );
    $("#show").click(
      ()=>{
        $(".update-form").slideToggle();
      }
    )
  </script>
    
</body>
</html>